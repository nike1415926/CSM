# IFRS 17 åˆç´„æœå‹™é‚Šéš› (CSM) è¨ˆç®—æ¨¡å‹

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-blue.svg)
![R](https://img.shields.io/badge/R-4.0+-blue.svg)
![Status](https://img.shields.io/badge/status-production--ready-green.svg)


</div>

---

## ğŸ“‹ å°ˆæ¡ˆç°¡ä»‹

å¯¦ç¾ **IFRS 17 åœ‹éš›è²¡å‹™å ±å°æº–å‰‡ç¬¬ 17 è™Ÿã€Œä¿éšªåˆç´„ã€** ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ â€” **åˆç´„æœå‹™é‚Šéš› (CSM)**ã€‚æä¾›å®Œæ•´çš„è² å‚µè¡¡é‡æ¡†æ¶ï¼ŒåŒæ™‚æ”¯æ´ **TW-ICS (Taiwan Insurance Capital Standards)** è³‡æœ¬é©è¶³æ€§è©•ä¼°ã€‚

### ğŸ¯ æ ¸å¿ƒç›®æ¨™

- âœ… å®Œæ•´å¯¦ç¾ IFRS 17 BBA è¨ˆç®—é‚è¼¯
- âœ… æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•
- âœ… æ”¯æ´æ•æ„Ÿæ€§åˆ†æèˆ‡æƒ…å¢ƒæ¸¬è©¦
- âœ… å°ˆæ¥­è¦–è¦ºåŒ–åœ–è¡¨ç”Ÿæˆ
- âœ… å¯å¯©è¨ˆçš„ç¨‹å¼ç¢¼çµæ§‹
- âœ… é›™èªå¯¦ç¾ (R & Python)

---

## ğŸŒŸ ç‰¹é»

### æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

| æ¨¡çµ„ | åŠŸèƒ½ | æè¿° |
|------|------|------|
| **1. ç¾é‡‘æµé‡é æ¸¬** | `project_cashflows()` | é€å¹´é æ¸¬ä¿è²»æµå…¥ã€ç†è³ /è„«é€€çµ¦ä»˜æµå‡ºã€è²»ç”¨æ”¯å‡º |
| **2. æŠ˜ç¾å› å­è¨ˆç®—** | `calculate_discount_factors()` | åŸºæ–¼å³æœŸåˆ©ç‡æ›²ç·šè¨ˆç®—å„æœŸæŠ˜ç¾å› å­ |
| **3. é¢¨éšªèª¿æ•´** | `determine_risk_adjustment()` | ä½¿ç”¨è³‡æœ¬æˆæœ¬æ³•è¨ˆç®—éé‡‘èé¢¨éšªèª¿æ•´ (99.5% VaR) |
| **4. BBA çµ„ä»¶è¨ˆç®—** | `calculate_BBA_components()` | æ•´åˆè¨ˆç®— PVFCFã€RAã€CSM èˆ‡ LRC |
| **5. CSM æ”¤éŠ·** | `amortize_csm()` | è¨ˆç®— CSM åœ¨ä¿éšœæœŸé–“å…§çš„ç³»çµ±æ€§é‡‹æ”¾ |
| **6. æ•æ„Ÿæ€§åˆ†æ** | `run_scenario()` | å¤šæƒ…å¢ƒå‡è¨­è®Šå‹•å½±éŸ¿åˆ†æ |


---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### Python ç‰ˆæœ¬

#### ç’°å¢ƒéœ€æ±‚

```bash
Python >= 3.8
numpy >= 1.20
pandas >= 1.3
matplotlib >= 3.4
seaborn >= 0.11
```

#### å®‰è£èˆ‡åŸ·è¡Œ

```bash
# 1. Clone å°ˆæ¡ˆ
git clone https://github.com/yourusername/ifrs17-csm-model.git
cd ifrs17-csm-model

# 2. å®‰è£ä¾è³´
pip install -r requirements.txt

# 3. åŸ·è¡Œç¯„ä¾‹
python ifrs17_csm_model.py

# 4. æŸ¥çœ‹çµæœ
ls output/
# - csm_amortization_trend.png
# - cashflow_structure.png
# - bba_components.png
# - csm_sensitivity_analysis.png
```

### R ç‰ˆæœ¬

#### ç’°å¢ƒéœ€æ±‚

```r
R >= 4.0
dplyr >= 1.0
ggplot2 >= 3.3
tidyr >= 1.1
knitr >= 1.3
scales >= 1.1
```

#### å®‰è£èˆ‡åŸ·è¡Œ

```R
# 1. è¨­å®šå·¥ä½œç›®éŒ„
setwd("path/to/ifrs17-csm-model")

# 2. å®‰è£å¥—ä»¶
install.packages(c("dplyr", "ggplot2", "tidyr", "knitr", "scales"))

# 3. åŸ·è¡Œç¯„ä¾‹
source("R/run_example.R")

# 4. æŸ¥çœ‹çµæœ
list.files("output/")
```

---

## ğŸ“Š ç¯„ä¾‹è¼¸å‡º

### è¨ˆç®—çµæœæ‘˜è¦

```
======================================================================
IFRS 17 å»ºç¯‰å€å¡Šæ³• (BBA) è¨ˆç®—çµæœæ‘˜è¦
======================================================================
å±¥è¡Œç¾é‡‘æµé‡ç¾å€¼ (PVFCF): NT$ -1,268.7M
é¢¨éšªèª¿æ•´ (RA):            NT$ 8.9M
åˆç´„æœå‹™é‚Šéš› (CSM):       NT$ 1,259.7M
å‰©é¤˜ä¿éšœè² å‚µ (LRC):       NT$ 0.0M
======================================================================
```

### CSM æ”¤éŠ·æ™‚é–“è¡¨ï¼ˆå‰ 5 å¹´ï¼‰

| å¹´åº¦ | æœŸåˆCSM (M) | åˆ©æ¯å¢å€¼ (M) | é‡‹æ”¾è‡³æç›Š (M) | æœŸæœ«CSM (M) |
|------|-------------|--------------|----------------|-------------|
| 1 | 1,259.7 | 25.2 | 113.4 | 1,171.5 |
| 2 | 1,171.5 | 23.4 | 109.9 | 1,085.0 |
| 3 | 1,085.0 | 21.7 | 103.1 | 1,003.7 |
| 4 | 1,003.7 | 20.1 | 94.6 | 929.2 |
| 5 | 929.2 | 18.6 | 84.8 | 862.9 |

### æ•æ„Ÿæ€§åˆ†æçµæœ

| æƒ…å¢ƒ | PVFCF (M) | RA (M) | CSM (M) | CSMè®Šå‹•% |
|------|-----------|--------|---------|----------|
| åŸºæº–æƒ…å¢ƒ | -1,268.7 | 8.9 | 1,259.7 | 0.0% |
| æ­»äº¡ç‡ +10% | -1,257.1 | 9.3 | 1,247.8 | -0.9% |
| è„«é€€ç‡ +20% | -1,112.5 | 8.5 | 1,103.9 | -12.4% |
| æŠ˜ç¾ç‡ -50bps | -1,322.6 | 9.5 | 1,313.1 | +4.2% |

### è¦–è¦ºåŒ–åœ–è¡¨

<div align="center">
  <img src="output/csm_amortization_trend.png" width="45%">
  <img src="output/bba_components.png" width="45%">
  <img src="output/cashflow_structure.png" width="45%">
  <img src="output/csm_sensitivity_analysis.png" width="45%">
</div>

---

## ğŸ—ï¸ å°ˆæ¡ˆæ¶æ§‹

```
ifrs17-csm-model/
â”‚
â”œâ”€â”€ ifrs17_csm_model.R        # Rå¯¦ç¾ï¼ˆä¸»ç¨‹å¼ï¼‰
â”‚
â”œâ”€â”€ ifrs17_csm_model.py            # Python å¯¦ç¾ï¼ˆä¸»ç¨‹å¼ï¼‰
â”‚
â”œâ”€â”€ output/                         # è¼¸å‡ºçµæœ
â”‚   â”œâ”€â”€ csm_amortization_trend.png
â”‚   â”œâ”€â”€ cashflow_structure.png
â”‚   â”œâ”€â”€ bba_components.png
â”‚   â””â”€â”€ csm_sensitivity_analysis.png
â”‚
â”œâ”€â”€ data/                          # æ•¸æ“šè¼¸å…¥ï¼ˆå¯é¸ï¼‰
â”‚   â””â”€â”€ assumptions_template.xlsx
â”‚
â”œâ”€â”€ README.md                      # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

---

## ğŸ“– æ–¹æ³•è«–

### IFRS 17 å»ºç¯‰å€å¡Šæ³• (BBA)

BBA å°‡ä¿éšªè² å‚µåˆ†è§£ç‚ºä¸‰å€‹æ ¸å¿ƒçµ„ä»¶ï¼š

1. **å±¥è¡Œç¾é‡‘æµé‡ç¾å€¼ (PVFCF)**
   - å°æœªä¾†æ‰€æœ‰ç¾é‡‘æµé‡çš„ç„¡åèª¤ã€æ©Ÿç‡åŠ æ¬Šä¼°è¨ˆ
   - ä½¿ç”¨å¸‚å ´ä¸€è‡´çš„æŠ˜ç¾ç‡æŠ˜ç¾è‡³ç¾å€¼
   
2. **éé‡‘èé¢¨éšªèª¿æ•´ (RA)**
   - é‡åŒ–æ‰¿æ“”éé‡‘èé¢¨éšªï¼ˆæ­»äº¡ã€è„«é€€ã€è²»ç”¨ç­‰ï¼‰çš„è£œå„Ÿ
   - æœ¬æ¨¡å‹æ¡ç”¨**è³‡æœ¬æˆæœ¬æ³•**ï¼Œç¬¦åˆ 99.5% VaR æ¨™æº–
   
3. **åˆç´„æœå‹™é‚Šéš› (CSM)**
   - ä»£è¡¨åˆç´„åˆå§‹æ—¥çš„æœªè³ºå¾—åˆ©æ½¤
   - åœ¨ä¿éšœæœŸé–“å…§ç³»çµ±æ€§æ”¤éŠ·ä¸¦é‡‹æ”¾è‡³æç›Š
   - è¨ˆç®—å…¬å¼ï¼šCSM = -(PVFCF + RA)ï¼ˆç›ˆåˆ©æ€§åˆç´„ï¼‰

### IFRS 17 èˆ‡ TW-ICS æ•´åˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç²¾ç®—å‡è¨­èˆ‡ä¿å–®è³‡æ–™åº«                  â”‚
â”‚   (æ­»äº¡ç‡, è„«é€€ç‡, è²»ç”¨ç‡ç­‰)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IFRS 17 BBA æ¨¡å‹                      â”‚
â”‚   â”œâ”€â”€ project_cashflows()               â”‚
â”‚   â”œâ”€â”€ calculate_discount_factors()      â”‚
â”‚   â”œâ”€â”€ determine_risk_adjustment()       â”‚
â”‚   â””â”€â”€ calculate_BBA_components()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚
         â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IFRS 17 è²¡å‹™å ±è¡¨ â”‚    â”‚ TW-ICS è³‡æœ¬é©è¶³æ€§   â”‚
â”‚ â”œâ”€â”€ LRC          â”‚    â”‚ â”œâ”€â”€ æŠ€è¡“æº–å‚™é‡‘      â”‚
â”‚ â”œâ”€â”€ P&L          â”‚    â”‚ â”œâ”€â”€ SCR             â”‚
â”‚ â””â”€â”€ OCI          â”‚    â”‚ â””â”€â”€ Own Funds       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¼ å¯¦å‹™æ‡‰ç”¨

### é©ç”¨å ´æ™¯

- âœ… **è²¡å‹™å ±è¡¨ç·¨è£½**: IFRS 17 å­£åº¦/å¹´åº¦å ±å‘Š
- âœ… **è³‡æœ¬ç®¡ç†**: TW-ICS æ¸…å„Ÿèƒ½åŠ›è©•ä¼°
- âœ… **ç”¢å“é–‹ç™¼**: æ–°ç”¢å“ç›ˆåˆ©èƒ½åŠ›åˆ†æ
- âœ… **ALM ç­–ç•¥**: è³‡ç”¢è² å‚µç®¡ç†å„ªåŒ–
- âœ… **ç›£ç®¡ç”³å ±**: ç¬¦åˆé‡‘ç®¡æœƒè¦æ±‚
- âœ… **é¢¨éšªç®¡ç†**: å£“åŠ›æ¸¬è©¦èˆ‡æƒ…å¢ƒåˆ†æ

### å¯¦å‹™æ¡ˆä¾‹

**æƒ…å¢ƒ**: è©•ä¼°åˆ©ç‡é¢¨éšªå° CSM çš„å½±éŸ¿

```python
# å»ºç«‹æ¨¡å‹
model = IFRS17_CSM_Model(policy_data, assumptions, proj_years=20)

# åŸºæº–æƒ…å¢ƒ
baseline = model.calculate_BBA_components()

# åˆ©ç‡ä¸‹é™ 100 bps
stress_assumptions = assumptions.copy()
stress_assumptions['discount_curve'] = [r - 0.01 for r in assumptions['discount_curve']]
stress_model = IFRS17_CSM_Model(policy_data, stress_assumptions, proj_years=20)
stress_results = stress_model.calculate_BBA_components()

# åˆ†æå½±éŸ¿
csm_impact = (stress_results['CSM'] - baseline['CSM']) / baseline['CSM']
print(f"CSM è®Šå‹•: {csm_impact:.2%}")
```

---

## ğŸ“š å»¶ä¼¸é–±è®€

### IFRS 17 å®˜æ–¹è³‡æº

- [IFRS 17 æº–å‰‡å…¨æ–‡](https://www.ifrs.org/issued-standards/list-of-standards/ifrs-17-insurance-contracts/)
- [IASB å¯¦æ–½æŒ‡å¼•](https://www.ifrs.org/projects/completed-projects/2017/ifrs-17-insurance-contracts/)

### ç›£ç®¡æŒ‡å¼•

- [é‡‘ç®¡æœƒ IFRS 17 å°ˆå€](https://www.fsc.gov.tw/)
- [TW-ICS åˆ¶åº¦èªªæ˜](https://www.lia-roc.org.tw/)

### å­¸è¡“æ–‡ç»

- IFRS 17 Technical Summary (IASB)
- Risk Adjustment under IFRS 17 (IAA)
- Contractual Service Margin Allocation (EFRAG)


</div>
